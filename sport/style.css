/* ===============================
   Basket Scoreboard — Polished UI
   =============================== */

:root{
  --bg:#0b1020;           /* 背景 */
  --bg-elev:#0f172a;      /* 卡片背景 */
  --bg-elev-2:#0b1224;
  --line:#1f2a44;         /* 邊框 */
  --fg:#e7ecf5;           /* 文字 */
  --fg-dim:#aab3c7;       /* 次要文字 */
  --muted:#9aa6bf;        /* 輔助文 */
  --accent:#22c55e;       /* 主要強調 */
  --accent-2:#38bdf8;     /* 次強調 */
  --warn:#f59e0b;         /* 警示/提醒 */
  --danger:#ef4444;       /* 危險/刪除 */
  --ok:#10b981;           /* 成功 */
  --chip-bg:#0b2a24;      /* 標籤背景 */
  --chip-bd:#14532d;      /* 標籤邊框 */

  --radius:14px;
  --radius-sm:10px;
  --radius-xs:8px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --shadow-soft:0 6px 16px rgba(0,0,0,.25);
  --shadow-in:inset 0 1px 0 rgba(255,255,255,.04);
  --focus:0 0 0 3px rgba(56,189,248,.25); /* 藍色 Focus Ring */
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(140% 130% at 100% 0%, #0e1224 20%, #0b1020 60%, #0a0e1b 100%);
  color:var(--fg);
  font:15.5px/1.55 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans TC, PingFang TC, "Microsoft JhengHei";
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ===== Header & Tabs ===== */
header{
  position:sticky; top:0; z-index:30;
  background:rgba(11,16,32,.75);
  backdrop-filter:saturate(140%) blur(12px);
  border-bottom:1px solid var(--line);
}
.container{max-width:1200px;margin:0 auto;padding:16px}
h1{margin:0;font-size:20px;letter-spacing:.3px}
.tabs-wrap{padding-top:0}
.tabs{display:flex;gap:8px;flex-wrap:wrap}
.tab{
  padding:10px 14px;
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  background:linear-gradient(180deg, #0c142c, #0b1226);
  color:var(--fg);
  cursor:pointer;
  transition:transform .08s ease, background .2s ease, border-color .2s ease;
}
.tab:hover{ transform:translateY(-1px); border-color:#31507a; }
.tab.active{
  background:linear-gradient(180deg,#17223a,#111b34);
  border-color:#2b4369;
  box-shadow:var(--shadow-in);
}

/* ===== Layout ===== */
.main{padding-bottom:40px}
.grid{display:grid;gap:16px}
.grid-3{grid-template-columns:1.1fr 1.1fr 0.9fr}
.grid-2{grid-template-columns:1fr 1fr}
.grid-3 .card, .grid-2 .card{height:100%}
@media (max-width:1000px){
  .grid-3{grid-template-columns:1fr}
  .grid-2{grid-template-columns:1fr}
}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.space-between{justify-content:space-between}
.center{justify-content:center}
.flex1{flex:1}
.mt8{margin-top:8px} .mt12{margin-top:12px}

/* ===== Card ===== */
.card{
  background:
    linear-gradient(180deg, #0f172a, #0b1224) padding-box,
    radial-gradient(120% 160% at 100% 0%, rgba(56,189,248,.12), transparent 45%) border-box;
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow-soft);
}
.divider{border:0;border-top:1px solid var(--line);margin:16px 0}

/* ===== Text ===== */
.label{
  font-size:12px; color:var(--fg-dim);
  text-transform:uppercase; letter-spacing:.12em;
}
.muted{color:var(--muted)}
.mono{font-family:ui-monospace, Menlo, Consolas, monospace}

/* ===== Buttons ===== */
button,.btn{
  appearance:none;
  border:1px solid var(--line);
  background:linear-gradient(180deg,#111a33,#0b1327);
  color:var(--fg);
  padding:10px 14px;
  border-radius:var(--radius-sm);
  cursor:pointer;
  transition:transform .06s ease, border-color .2s ease, box-shadow .2s ease, background .2s ease, opacity .2s ease;
}
button:hover{ transform:translateY(-1px); border-color:#36578c; }
button:active{ transform:translateY(0); }
button:focus-visible{ outline:none; box-shadow:var(--focus); }

.btn-accent{
  background:linear-gradient(180deg,#22c55e,#17a34a);
  border-color:transparent; color:#062813;
}
.btn-accent:hover{ filter:brightness(1.04); }
.btn-danger{
  background:linear-gradient(180deg,#ef4444,#dc2626);
  border-color:transparent; color:#fff;
}
.btn-danger:hover{ filter:brightness(1.05); }
.btn-warn{
  background:linear-gradient(180deg,#f59e0b,#d97706);
  border-color:transparent; color:#2b1a04;
}
.btn[disabled],button[disabled]{ opacity:.55; cursor:not-allowed; }

/* ===== Inputs ===== */
input,select,textarea{
  width:100%;
  background:linear-gradient(180deg,#0c142b,#0a1226);
  border:1px solid var(--line);
  color:var(--fg);
  padding:10px 12px;
  border-radius:var(--radius-sm);
  transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
input::placeholder,textarea::placeholder{ color:#74809a; }
input:focus,select:focus,textarea:focus{
  outline:none; border-color:#3e6aa8; box-shadow:var(--focus);
}
label{display:block; font-size:13px; color:var(--fg-dim); }
label>input, label>select, label>textarea{ margin-top:6px; }

/* ===== Score ===== */
.score{
  font-size:46px; font-weight:800; letter-spacing:.5px;
  text-shadow:0 4px 16px rgba(0,0,0,.35);
}
.score.small{font-size:30px}

/* ===== Chips / Tags ===== */
.chip{
  display:inline-flex; align-items:center; gap:6px;
  font-size:12px; color:#b2f5ea;
  background:linear-gradient(180deg,#063a35,#052e2a);
  padding:4px 10px; border-radius:999px; border:1px solid var(--chip-bd);
}

/* ===== Tables ===== */
.table-wrap{
  margin-top:12px; border:1px solid var(--line);
  border-radius:var(--radius); overflow:auto; max-height:520px;
  box-shadow:var(--shadow-in);
}
table{ width:100%; border-collapse:collapse; }
th,td{ padding:10px 12px; border-bottom:1px solid var(--line); }
th{
  position:sticky; top:0; z-index:1;
  background:linear-gradient(180deg,#101a31,#0c1429);
  font-size:12px; color:var(--fg-dim); text-transform:uppercase; letter-spacing:.08em;
}
tbody tr{ transition: background .15s ease; }
tbody tr:hover{ background:rgba(56,189,248,.05); }

/* 球員狀態標示 */
.tr-flag{ background: rgba(239,68,68,.10); }
.tr-eject{ background: rgba(239,68,68,.20); border-left:3px solid #ef4444; }

/* ===== Team Fouls & Bonus ===== */
.foul-count{ font:700 24px/1 ui-monospace, Menlo, Consolas; }
.bonus{
  padding:2px 8px; border-radius:999px;
  background:#451a03; color:#ffedd5; border:1px solid #78350f; font-size:12px;
}

/* ===== Shot Clock ===== */
.shot-face{ display:flex; flex-direction:column; align-items:center; gap:6px; padding:8px 0; }
.shot-display{ font:900 64px/1 ui-monospace,Menlo,Consolas; letter-spacing:1px; }
.shot-danger{ color:#fecaca; }

/* ===== Game Clock ===== */
.game-face{ display:flex; flex-direction:column; align-items:center; gap:6px; padding:8px 0; }
.game-display{ font:900 56px/1 ui-monospace,Menlo,Consolas; letter-spacing:1px; }
.game-danger{ color:#fde68a; }

/* ===== Action set (小按鈕群) ===== */
.opset{ display:flex; flex-wrap:wrap; gap:6px }
.opbtn{ font-size:12px; padding:5px 8px; border-radius:var(--radius-xs); }

/* ===== Views ===== */
.view{ display:none; }
.view.active{ display:block; animation:fadeIn .18s ease both; }
@keyframes fadeIn{
  from{ opacity:0; transform:translateY(4px); }
  to{ opacity:1; transform:translateY(0); }
}

/* ===== Modal（罰球引導器 / 批量匯入） ===== */
.modal{
  position:fixed; inset:0; z-index:50;
  display:flex; align-items:center; justify-content:center;
  background:rgba(3,6,14,.6);
  backdrop-filter:saturate(130%) blur(6px);
}
.modal-box{
  background:linear-gradient(180deg,#0f172a,#0b1224);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:16px;
  min-width:340px; max-width:720px; width:min(92vw,720px);
  box-shadow:var(--shadow);
}
.ft-shots{ display:flex; flex-wrap:wrap; gap:10px; }
.ft-btn{ min-width:96px; }

/* ===== Player Admin extras ===== */
.avatar-wrap{
  width:120px;height:120px;border-radius:12px;overflow:hidden;
  border:1px solid var(--line); background:#0a1222;
  box-shadow:var(--shadow-in);
}
#playerAdminView .card .grid label input[type="file"]{
  padding:8px; background:#0b1327; border-style:dashed;
}
#playerAdminView .card .grid label input[type="file"]:hover{
  border-color:#3b6aa1;
}

/* Roster 表格裡的頭像縮圖 */
.roster-avatar{
  width:40px;height:40px;border-radius:8px;object-fit:cover;border:1px solid var(--line);
  box-shadow:0 2px 6px rgba(0,0,0,.25);
}

/* 篩選列 */
#filterTeam, #filterKeyword{ min-width:160px }

/* ===== Form Helpers ===== */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
input[type="number"]{ -moz-appearance:textfield; }

/* ===== Tooltips（純 CSS，必要時可加 title 屬性） ===== */
[title]{ position:relative; }
[title]:hover::after{
  content:attr(title);
  position:absolute; left:50%; transform:translateX(-50%);
  bottom:calc(100% + 8px);
  white-space:nowrap;
  background:#101a31; color:#cfe7ff;
  border:1px solid #2c4d7a; border-radius:8px;
  padding:6px 8px; font-size:12px; z-index:10;
  box-shadow:var(--shadow-soft);
}

/* ===== Scrollbar（美化） ===== */
*{ scrollbar-width:thin; scrollbar-color:#30466e transparent; }
*::-webkit-scrollbar{ height:10px; width:10px; }
*::-webkit-scrollbar-track{ background:transparent; }
*::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg,#2a3f66,#24385b);
  border-radius:999px; border:2px solid transparent; background-clip:padding-box;
}
*::-webkit-scrollbar-thumb:hover{ background:linear-gradient(180deg,#364f7d,#2e476f); }

/* ===== Small States ===== */
.kbd{
  font:12px/1 ui-monospace,Menlo,Consolas;
  padding:2px 6px;border-radius:6px;border:1px solid #2a3f55;background:#0c1429;color:#9db7da;
}

/* ===== Responsive tweaks ===== */
@media (max-width:640px){
  .container{ padding:14px }
  .score{ font-size:40px }
  .shot-display{ font-size:58px }
  .game-display{ font-size:48px }
  .tab{ padding:8px 10px }
  th,td{ padding:8px 10px }
}


/* ===============================
   Dashboard 專用樣式
   =============================== */

/* --- 計分區 --- */
#dashboardView .score {
  font-size: 48px;
  font-weight: 900;
  text-align: center;
  letter-spacing: 1px;
}

#dashboardView .score.small {
  font-size: 22px;
  color: var(--fg-dim);
  font-weight: 600;
}

#dashboardView .card {
  text-align: center;
}

/* --- 計時區 --- */
#dashboardView .game-display,
#dashboardView .shot-display {
  font-size: 56px;
  font-weight: 900;
  font-family: ui-monospace, Menlo, Consolas;
  letter-spacing: 2px;
  text-shadow: 0 4px 16px rgba(0,0,0,.35);
}

#dashboardView .shot-display {
  color: var(--accent-2);
}
#dashboardView .shot-danger {
  color: var(--danger);
}

/* --- 球員卡片區 --- */
#dashboardView #dashHomeFive,
#dashboardView #dashAwayFive {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin-top: 12px;
}

#dashboardView .player-card {
  width: 220px;
  padding: 14px;
  background: linear-gradient(180deg,#101a31,#0b1224);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
  display: flex;
  flex-direction: column;
  gap: 8px;
  transition: transform .15s ease, box-shadow .2s ease;
}
#dashboardView .player-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 18px rgba(0,0,0,.4);
}

/* 頭像 */
#dashboardView .player-avatar {
  width: 56px;
  height: 56px;
  border-radius: 12px;
  object-fit: cover;
  border: 1px solid var(--line);
  background: #0a1222;
  box-shadow: var(--shadow-in);
}

/* 上方基本資訊 */
#dashboardView .player-top {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}
#dashboardView .player-num {
  font-size: 20px;
  font-weight: 800;
  font-family: ui-monospace, Menlo, Consolas;
}
#dashboardView .player-name {
  font-weight: 700;
  font-size: 15px;
}
#dashboardView .player-meta {
  font-size: 12px;
  color: var(--muted);
}

/* 簡要統計區 */
#dashboardView .player-stats {
  display: flex;
  justify-content: space-between;
  margin-top: 6px;
}
#dashboardView .stat .label {
  font-size: 11px;
  color: var(--fg-dim);
}
#dashboardView .stat .value {
  font-size: 20px;
  font-weight: 800;
  font-family: ui-monospace, Menlo, Consolas;
}

/* 犯滿警示 */
#dashboardView .foul-max {
  background: rgba(239,68,68,.2);
  border: 1px solid var(--danger);
}

/* Players View：卡片牆（每列 5 張，自動換行） */
.players-cards{
  display:flex; flex-wrap:wrap; gap:14px;
}
.players-cards .player-card{
  width: 210px;
  padding: 12px;
  background: linear-gradient(180deg,#101a31,#0b1224);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
  transition: transform .12s ease, box-shadow .18s ease;
  cursor: pointer;
}
.players-cards .player-card:hover{ transform:translateY(-2px); box-shadow:0 6px 18px rgba(0,0,0,.35); }
.players-cards .player-top{ display:flex; gap:10px; align-items:flex-start; }
.players-cards .player-avatar{ width:48px; height:48px; border-radius:10px; object-fit:cover; border:1px solid var(--line); }
.players-cards .player-num{ font:800 18px ui-monospace,Menlo,Consolas; }
.players-cards .player-name{ font-weight:700; }
.players-cards .player-meta{ font-size:12px; color:var(--muted); }
.players-cards .player-stats{ display:flex; justify-content:space-between; margin-top:6px; }
.players-cards .stat .label{ font-size:11px; color:var(--fg-dim); }
.players-cards .stat .value{ font:800 18px ui-monospace,Menlo,Consolas; }

.players-cards .foul-max{ background:rgba(239,68,68,.15); border-color:var(--danger); }

/* Players 索引：濾器條 */
.players-filters select, .players-filters input{ min-width: 160px }

/* 卡片牆沿用 dashboard 風格（你已經有 .players-cards 定義） */

/* 上場 Switch */
.switch{ position:relative; display:inline-block; width:52px; height:28px; }
.switch input{ display:none; }
.switch .slider{
  position:absolute; inset:0; border-radius:999px;
  background:#24314f; border:1px solid var(--line);
  transition: all .18s ease;
}
.switch .slider::before{
  content:""; position:absolute; height:22px; width:22px; left:3px; top:2px;
  border-radius:50%; background:#c7d2fe; transition: transform .18s ease, background .18s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,.35);
}
.switch input:checked + .slider{
  background: linear-gradient(180deg,#22c55e,#16a34a);
  border-color: transparent;
}
.switch input:checked + .slider::before{
  transform: translateX(24px); background:#fff;
}

/* ==== Players 索引卡片牆：桌機固定五欄，RWD 漸降 ==== */
.players-cards{
  display:grid;
  grid-template-columns: repeat(5, minmax(200px, 1fr));
  gap:14px;
}
@media (max-width: 1200px){
  .players-cards{ grid-template-columns: repeat(4, minmax(200px, 1fr)); }
}
@media (max-width: 980px){
  .players-cards{ grid-template-columns: repeat(3, minmax(200px, 1fr)); }
}
@media (max-width: 720px){
  .players-cards{ grid-template-columns: repeat(2, minmax(200px, 1fr)); }
}
@media (max-width: 480px){
  .players-cards{ grid-template-columns: 1fr; }
}

/* 卡片互動 & 微調密度 */
.players-cards .player-card{
  position:relative;
  overflow:hidden;
}
.players-cards .player-card::after{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(180px 120px at 100% -10%, rgba(56,189,248,.08), transparent 60%);
  pointer-events:none; opacity:.9;
}
.players-cards .player-card:hover{
  transform: translateY(-2px) scale(1.01);
}

/* Team 標籤上色：依 data-team */
.player-card .team-chip{ color:#cfe7ff; border:1px solid var(--line); }
.player-card[data-team="home"] .team-chip{
  background: linear-gradient(180deg, #0b3a2b, #092c22);
  border-color:#14532d;
}
.player-card[data-team="away"] .team-chip{
  background: linear-gradient(180deg, #162b51, #122445);
  border-color:#294d8b;
}

/* 關鍵數字再清晰一點 */
.players-cards .player-num{ letter-spacing:.3px; }
.players-cards .stat .value{ text-shadow:0 2px 10px rgba(0,0,0,.25); }

/* 犯滿提示再明顯一些（微光暈） */
.players-cards .foul-max{
  box-shadow: 0 0 0 1px var(--danger) inset, 0 8px 20px rgba(239,68,68,.18);
}

/* Player Admin — Compact form */
.admin-compact .card{ padding:14px }
.admin-compact .grid{ gap:10px }
.admin-compact label{ font-size:12px; color:var(--fg-dim) }
.admin-compact input,
.admin-compact select{ padding:8px 10px; font-size:14px; border-radius:10px }
.admin-compact .help{ font-size:12px; color:var(--muted) }

.field-sm input, .field-sm select{ padding:6px 8px; font-size:13px }

#toggleRosterBtn{ font-size:12px; padding:6px 10px }
#adminRosterCard[hidden]{ display:none }